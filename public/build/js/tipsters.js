function gestionTipsters(){function e(){$.ajax({url:"bettor/my-tipsters-view-list",type:"get",success:function(e){$(h).html(e),$("#tipsterstable").dataTable({language:{processing:"Traitement en cours...",search:"Rechercher&nbsp;:",lengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",info:"Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",infoEmpty:"Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",infoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",infoPostFix:"",loadingRecords:"Chargement en cours...",zeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",emptyTable:"Aucune donnée disponible dans le tableau",paginate:{first:"Premier",previous:"Pr&eacute;c&eacute;dent",next:"Suivant",last:"Dernier"},aria:{sortAscending:": activer pour trier la colonne par ordre croissant",sortDescending:": activer pour trier la colonne par ordre décroissant"}},lengthMenu:[[10,15,20,100],[10,15,20,100]],ordering:!1,pageLength:10,dom:"<'table-scrollable't><'row'<'col-md-5 col-sm-6'i><'col-md-7 col-sm-6'p>>"}),t(),s()}})}function r(){var r=$("#tipsterform-add");r.submit(function(t){t.preventDefault();r.find("#name_tipster"),r.find("#amount_tipster"),r.find("#suivi_tipster"),r.find("#nameinputerror"),r.find("#unitnumberinputerror"),r.find("#followtypeselecterror");$("#tipsterAddModal").on("hide.bs.modal",function(){r.find("#name_container").removeClass("has-error"),r.find("#amount_container").removeClass("has-error"),r.find("#suivi_container").removeClass("has-error"),r.find("#name_error").empty(),r.find("#amount_error").empty(),r.find("#suivi_error").empty(),r.find(i).val(""),r.find(l).val(""),r.find(d).find('option[value="n"]').attr("selected",!0)}),$.ajax({url:"tipster",data:$("#tipsterform-add").serialize(),type:"POST",dataType:"json",success:function(t){0==t.success?(t.errors.name_tipster?(r.find("#name_container").addClass("has-error"),r.find("#name_error").html(t.errors.name_tipster)):(r.find("#name_container").removeClass("has-error"),r.find("#name_error").empty()),t.errors.amount_tipster?(r.find("#amount_container").addClass("has-error"),r.find("#amount_error").html(t.errors.amount_tipster)):(r.find("#amount_container").removeClass("has-error"),r.find("#amount_error").empty()),t.errors.suivi_tipster?(r.find("#suivi_container").addClass("has-error"),r.find("#suivi_error").html(t.errors.suivi_tipster)):(r.find("#suivi_container").removeClass("has-error"),r.find("#suivi_error").empty())):(e(),toastr.success("Le tipster à été crée avec <strong>succès</strong>!","Tipster"),$("#tipsterAddModal").modal("hide"))}})})}function t(){f.on("show.bs.modal",function(e){var r=$(e.relatedTarget);console.log(r.data("id"));var t=v;t.find(_).val(r.data("id")),t.find(i).val(r.data("name")),t.find(l).val(r.data("mt")),t.find(d+' option[value="'+r.data("suivi")+'"]').prop("selected",!0)})}function n(){var r=v;r.submit(function(t){t.preventDefault();var n=$(this).find(_).val(),s=$(this).serialize();$("#tipsterEditModal").on("hide.bs.modal",function(){r.find(a).removeClass("has-error"),r.find(m).removeClass("has-error"),r.find(u).removeClass("has-error"),r.find(o).empty(),r.find(c).empty(),r.find(p).empty(),r.find(i).val(""),r.find(l).val(""),r.find(d).find('option[value="n"]').attr("selected",!0)}),$.ajax({url:"tipster/"+n,method:"PUT",data:s,dataType:"json",success:function(t){t.state?(e(),toastr.success("Le tipster à été modifié avec <strong>succès</strong>!","Tipster"),$("#tipsterEditModal").modal("hide")):(t.errors.name_tipster?(r.find(a).addClass("has-error"),r.find(o).html(t.errors.name_tipster)):(r.find(a).removeClass("has-error"),r.find(o).empty()),t.errors.amount_tipster?(r.find(m).addClass("has-error"),r.find(p).html(t.errors.amount_tipster)):(r.find(m).removeClass("has-error"),r.find(p).empty()),t.errors.suivi_tipster?(r.find(u).addClass("has-error"),r.find(c).html(t.errors.suivi_tipster)):(r.find(u).removeClass("has-error"),r.find(c).empty()))}})})}function s(){$("#tipsterstable").on("click",".tipsterDeleteButton",function(r){r.preventDefault();var t=($(this).parents("tr"),$(this).data("id")),n="tipster/"+t;swal({title:"Supprimer",text:"Etes vous sur ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Oui, supprimer",cancelButtonText:"Non, annuler",closeOnConfirm:!0,closeOnCancel:!0},function(r){r&&$.ajax({url:n,method:"DELETE",dataType:"json",success:function(r){1==r.state?(toastr.success("supprimé avec <strong>succès</strong> !","Tipster"),e()):2==r.state?swal("Attention!","Vous devez d'abord supprimer les tickets en cours liés à ce tipster.","error"):0==r.state&&swal("Attention!","Ce tipster n'existe pas","error")}})})})}var i="input[name='name_tipster']",a="#name_container",o="#name_error",d="select[name='suivi_tipster']",u="#suivi_container",c="#suivi_error",l="input[name='amount_tipster']",m="#amount_container",p="#amount_error",f=$("#tipsterEditModal"),v=$("#tipsterform-edit"),_="input[name='id']",h="#tipsters-pagination";e(),r(),n()}gestionTipsters();