function loadBookmakers(){$.ajax({url:"bettor/my-bookmakers-view-list",success:function(e){$("#bookmakers-pagination").html(e),$("#bookmakerstable").dataTable({language:{processing:"Traitement en cours...",search:"Rechercher&nbsp;:",lengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",info:"Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",infoEmpty:"Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",infoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",infoPostFix:"",loadingRecords:"Chargement en cours...",zeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",emptyTable:"Aucune donnée disponible dans le tableau",paginate:{first:"Premier",previous:"Pr&eacute;c&eacute;dent",next:"Suivant",last:"Dernier"},aria:{sortAscending:": activer pour trier la colonne par ordre croissant",sortDescending:": activer pour trier la colonne par ordre décroissant"}},pageLength:10,dom:"<'table-scrollable't><'row'<'col-md-5 col-sm-6'i><'col-md-7 col-sm-6'p>>"}),editBookmakerButton(),deleteBookmakerButton()}})}function editBookmakerButton(){$("#bookmakerEditModal").on("show.bs.modal",function(e){var r=$(e.relatedTarget),a=$("#bookmakerform-edit");a.find("#idBookmakerEditInput").val(r.data("id-bookmaker")),a.find("#idAccountEditInput").val(r.data("id")),a.find("input[name='name_account']").val(r.data("name"))})}function deleteBookmakerButton(){$("#bookmakerstable").on("click",".bookmakerDeleteButton",function(e){e.preventDefault();var r=$(this).data("id");swal({title:"Supprimer",text:"Etes vous sur ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Oui, supprimer",cancelButtonText:"Non, annuler",closeOnConfirm:!0,closeOnCancel:!0},function(e){e&&$.ajax({url:"bookmaker/"+r,method:"DELETE",dataType:"json",success:function(e){e.state?(toastr.success("Le compte "+e.compte.nom_compte+" à été supprimé avec succès!","Compte de bookmaker"),loadBookmakers()):swal("Attention!","Vous devez d'abord supprimer les paris en cours liés à ce compte.","error")}})})})}function gestionBookmakers(){function e(){var e=$("#bookmakerform-add");$("#bookmakerAddModal").on("hide.bs.modal",function(){e.find(o).removeClass("has-error"),e.find(s).removeClass("has-error"),e.find(d).removeClass("has-error"),e.find(t).empty(),e.find(i).empty(),e.find(m).empty(),e.find(a).val(""),e.find(n).val(""),e.find(c).val("")}),e.submit(function(r){var a=$(this).serialize();r.preventDefault(),$.ajax({url:"bookmaker",data:a,type:"post",dataType:"json",success:function(r){r.state?(loadBookmakers(),$("#bookmakerAddModal").modal("hide"),toastr.success("Compte ajouté","Compte de Bookmaker")):(r.errors.name_bookmaker?(e.find(o).addClass("has-error"),e.find(t).html(r.errors.name_bookmaker)):(e.find(o).removeClass("has-error"),e.find(t).empty()),r.errors.name_account?(e.find(s).addClass("has-error"),e.find(i).html(r.errors.name_account)):(e.find(s).removeClass("has-error"),e.find(i).empty()),r.errors.amount_bookmaker?(e.find(d).addClass("has-error"),e.find(m).html(r.errors.amount_bookmaker)):(e.find(d).removeClass("has-error"),e.find(m).empty()))}})})}function r(){var e=$("#bookmakerform-edit");$("#bookmakerEditModal").on("hide.bs.modal",function(){e.find("#account_container").removeClass("has-error"),e.find("#account_error").removeClass("has-error"),e.find("#account_error").empty()}),e.submit(function(r){r.preventDefault();var a=$(this).find("#idAccountEditInput").val();$.ajax({url:"bookmaker/"+a,method:"PUT",data:$(this).serialize(),dataType:"json",success:function(r){r.state?(loadBookmakers(),toastr.success("Compte mis à jour avec <strong>succes</strong> !","Compte de Bookmaker"),$("#bookmakerEditModal").modal("hide")):r.errors.name_account?(e.find(s).addClass("has-error"),e.find(i).html(r.errors.name_account)):(e.find(s).removeClass("has-error"),e.find(i).empty())}})})}var a="select[name='name_bookmaker']",o="#bookmaker_container",t="#bookmaker_error",n="input[name='name_account']",s="#account_container",i="#account_error",c="input[name='amount_bookmaker']",d="#amount_container",m="#amount_error";loadBookmakers(),e(),r()}function gestionTransactions(){function e(){$.ajax({url:"bettor/my-transactions-view-list",success:function(e){g.html(e),$("#transactionstable").dataTable({language:{processing:"Traitement en cours...",search:"Rechercher&nbsp;:",lengthMenu:"Afficher _MENU_ &eacute;l&eacute;ments",info:"Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",infoEmpty:"Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",infoFiltered:"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",infoPostFix:"",loadingRecords:"Chargement en cours...",zeroRecords:"Aucun &eacute;l&eacute;ment &agrave; afficher",emptyTable:"Aucune donnée disponible dans le tableau",paginate:{first:"Premier",previous:"Pr&eacute;c&eacute;dent",next:"Suivant",last:"Dernier"},aria:{sortAscending:": activer pour trier la colonne par ordre croissant",sortDescending:": activer pour trier la colonne par ordre décroissant"}},pageLength:10,dom:"<'table-scrollable't><'row'<'col-md-5 col-sm-6'i><'col-md-7 col-sm-6'p>>"}),getBookmakersForSelection(i,m)}})}function r(){$(o).on("hide.bs.modal",function(){a.find(n).removeClass("has-error"),a.find(c).removeClass("has-error"),a.find(l).removeClass("has-error"),a.find(p).removeClass("has-error"),a.find(v).removeClass("has-error"),a.find(s).empty(),a.find(d).empty(),a.find(u).empty(),a.find(k).empty(),a.find(b).empty(),a.find(t).val(null).trigger("change"),a.find(i).val(null).trigger("change"),a.find(m).val(null).trigger("change"),a.find(f).val(""),a.find(h).val("")}),a.submit(function(r){r.preventDefault(),$.ajax({url:"transaction",data:a.serialize(),type:"POST",dataType:"json",success:function(r){0==r.state?(r.errors.type?(a.find(n).addClass("has-error"),a.find(s).html(r.errors.type)):(a.find(n).removeClass("has-error"),a.find(s).empty()),r.errors.book?(a.find(c).addClass("has-error"),a.find(d).html(r.errors.book)):(a.find(c).removeClass("has-error"),a.find(d).empty()),r.errors.account?(a.find(l).addClass("has-error"),a.find(u).html(r.errors.account)):(a.find(l).removeClass("has-error"),a.find(u).empty()),r.errors.amount?(a.find(p).addClass("has-error"),a.find(k).html(r.errors.amount)):(a.find(p).removeClass("has-error"),a.find(k).empty()),r.errors.description?(a.find(v).addClass("has-error"),a.find(b).html(r.errors.description)):(a.find(v).removeClass("has-error"),a.find(b).empty())):(e(),loadBookmakers(),$(o).modal("hide"),toastr.success("Le transactions à été crée avec <strong>succès</strong>!","Transaction"))}})})}var a=$("#transactionform-add"),o="#transactionAddModal",t='select[name="type"]',n="#type_container",s="#type_error",i='select[name="book"]',c="#book_container",d="#book_error",m='select[name="account"]',l="#account_container",u="#account_error",f='input[name="amount"]',p="#amount_container",k="#amount_error",h='input[name="description"]',v="#description_container",b="#description_error",g=$("#transactions");e(),r()}gestionBookmakers(),gestionTransactions();