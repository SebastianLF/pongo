function deleteBookmakerButton(){$(".bookmakerDeleteButton").click(function(t){t.preventDefault();var e=$(this).parents("tr"),r=e.find(".idbookmakertd").text();console.log(r),swal({title:"Supprimer",text:"Etes vous sur ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Oui, supprimer",cancelButtonText:"Non, annuler",closeOnConfirm:!0,closeOnCancel:!0},function(t){t&&$.ajax({url:"bookmaker/"+r,method:"DELETE",data:{id:$("#idbookmakertd").text()},success:function(t){t.success?(toastr.success(t.compte.nom_compte+" à été supprimé avec succès","Compte de bookmaker"),loadBookmakers()):toastr.error("Vous devez d'abord supprimer les paris en cours liés à <strong>"+t.compte.nom_compte+"</strong> !","Compte de bookmaker")},error:function(){console.log("la suppression du compte bookmaker n'a pas fonctionné")}})})})}function editBookmakerButton(){$(".bookmakerEditButton").click(function(){$("#idBookmakerEditInput").val($(this).attr("data-id-bookmaker")),$("#idAccountEditInput").val($(this).attr("data-id")),$("#nameAccountEditInput").val($(this).attr("data-name"))})}function updateBookmaker(){$("#bookmakerform-edit").submit(function(t){t.preventDefault();var e=$(this).find("#idAccountEditInput").val();$.ajax({url:"bookmaker/"+e,method:"PUT",data:$(this).serialize(),dataType:"json",success:function(t){t.success?(loadBookmakers(),toastr.success("Compte mis à jour avec <strong>succes</strong> !","Compte Bookmaker"),$("#bookmakerEditModal").modal("hide")):($("#nameAccountEditContainer").addClass("has-error"),$("#nameAccountEditInput"),toastr.error("<ul><li>"+t.errors.nameAccountEditInput+"</li></ul>","Compte Bookmaker"))},error:function(t){console.log("impossible de mettre à jour le compte bookmaker")}})})}function loadBookmakers(t){t=t||"1",$.ajax({url:"pagination/ajax/bookmakers",data:{page:t},type:"get",success:function(t){$("#bookmakers-pagination").html(t),editBookmakerButton(),deleteBookmakerButton()},error:function(t){console.log("l'affichage des bookmakers n'a pas fonctionné")}})}function loadTransactions(t){t=t||"1",$.ajax({url:"pagination/ajax/transactions",data:{page:t},type:"get",success:function(t){$("#transactions-pagination").html(t),getBookmakersForSelection("#transactionform-add #booknametransselect","#transactionform-add #accountnametransselect")},error:function(){console.log("le chargement des transactions n'a pas fonctionné")}})}function loadTipsters(){$.ajax({url:"pagination/ajax/tipsters",data:{page:"1"},type:"get",success:function(t){$("#tipsters-pagination").html(t),tipsterEdit(),tipsterDelete()}})}function loadTipstersWithPage(){var t=$("#tipsters-pagination").find(".active").find("span").text(),e=$(".idtipstertd").length-1;t&&0!=e?$.ajax({url:"pagination/ajax/tipsters",data:{page:t},type:"get",success:function(t){console.log(t),$("#tipsters-pagination").html(t),tipsterEdit(),tipsterDelete()}}):loadTipsters()}function tipsterAdd(){$("#addtipsterloader").css("display","none"),$("#tipsterform-add").submit(function(t){t.preventDefault();{var e=$("#name_tipster"),r=$("#indice_tipster"),o=$("#amount_tipster"),a=$("#suivi_tipster");$("#nameinputerror"),$("#staketypeselecterror"),$("#unitnumberinputerror"),$("#followtypeselecterror")}$.ajax({url:"tipster",data:$("#tipsterform-add").serialize(),type:"POST",dataType:"json",success:function(t){if(0==t.success){var s="<ul>";t.errors.name_tipster?$("#name_tipster_container").addClass("has-error"):$("#name_tipster_container").removeClass("has-error"),t.errors.amount_tipster?$("#amount_tipster_container").addClass("has-error"):$("#amount_tipster_container").removeClass("has-error"),t.errors.suivi_tipster?$("#suivi_tipster_container").addClass("has-error"):$("#suivi_tipster_container").removeClass("has-error"),$.each(t.errors,function(t,e){s+="<li>"+e+"</li>"}),s+="</ul>",toastr.error(s,"Erreur: Ajout de tipster")}else loadTipsters(),$("#name_tipster_container").removeClass("has-error"),$("#indice_tipster_container").removeClass("has-error"),$("#amount_tipster_container").removeClass("has-error"),$("#suivi_tipster_container").removeClass("has-error"),e.val(""),r.find('option[value="10"]').attr("selected",!0),o.val(""),a.find('option[value="n"]').attr("selected",!0),toastr.success("tipster ajouté !","Tipster"),$("#tipsterAddModal").modal("hide")},error:function(){console.log("fail! le tipster n'a pas pu etre ajouté")},complete:function(){}})})}function tipsterDelete(){$("#tipsterstable").on("click",".tipsterDeleteButton",function(t){t.preventDefault();var e=$(this).parents("tr"),r=e.find(".idtipstertd").text(),o="tipster/"+r;swal({title:"Supprimer",text:"Etes vous sur ?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Oui, supprimer",cancelButtonText:"Non, annuler",closeOnConfirm:!0,closeOnCancel:!0},function(t){t&&$.ajax({url:o,method:"DELETE",dataType:"json",success:function(t){t.success?(toastr.success(t.tipster.name+" supprimé avec <strong>succès</strong> !","Tipster"),loadTipstersWithPage()):toastr.error("Vous devez d'abord supprimer les paris en cours liés à <strong>"+t.tipster.name+"</strong> !","Tipster")},error:function(t){console.log("fail!!")}})})})}function tipsterEdit(){$(".tipsterEditButton").click(function(){var t=$(this).attr("data-indice"),e=$(this).attr("data-suivi");$("#idTipsterEditInput").val($(this).attr("data-id")),$("#nameTipsterEditInput").val($(this).attr("data-name")),$('#indiceTipsterEditSelect option[value="'+t+'"]').prop("selected",!0),$("#mtTipsterEditInput").val($(this).attr("data-mt")),$('#suiviTipsterEditSelect option[value="'+e+'"]').prop("selected",!0)})}function tipsterUpdate(){$("#tipsterform-edit").submit(function(t){t.preventDefault();var e=$(this).find("#idTipsterEditInput").val(),r=$(this).serialize();$.ajax({url:"tipster/"+e,method:"PUT",data:r,dataType:"json",success:function(t){t.success?(loadTipstersWithPage(),$("#nameTipsterEditSmall").text(""),$("#indiceTipsterEditSmall").text(""),$("#mtTipsterEditSmall").text(""),$("#suiviTipsterEditSmall").text(""),toastr.success(t.tipster.name+" a été modifié avec <strong>succès</strong>!","Tipster"),$("#tipsterEditModal").modal("hide")):($("#nameTipsterEditSmall").text(t.errors.nameTipsterEditInput?t.errors.nameTipsterEditInput:""),$("#indiceTipsterEditSmall").text(t.errors.indiceTipsterEditSelect?t.errors.indiceTipsterEditSelect:""),$("#mtTipsterEditSmall").text(t.errors.mtTipsterEditInput?t.errors.mtTipsterEditInput:""),$("#suiviTipsterEditSmall").text(t.errors.suiviTipsterEditSelect?t.errors.suiviTipsterEditSelect:""),toastr.error("Remplissez les <strong>champs</strong> correctement!","Tipster"))},fail:function(t){console.log("fail !")}})})}tipsterUpdate(),tipsterAdd(),tipsterDelete(),tipsterEdit(),editBookmakerButton(),updateBookmaker(),loadTipsters(),loadBookmakers(),loadTransactions(),$("#addBookmakerButton").click(function(){$("#bookmakerListOnBookmakerContainer").removeClass("has-error"),$("#accountNameBookmakerContainer").removeClass("has-error"),$("#bankrollAmountBookmakerContainer").removeClass("has-error")}),$("#bookmakerform-add").submit(function(t){var e=$(this).serialize();t.preventDefault(),$.ajax({url:"bookmaker",data:e,type:"post",dataType:"json",success:function(t){if(t.success)$("#bookmakerListOnBookmakerContainer").removeClass("has-error"),$("#accountNameBookmakerContainer").removeClass("has-error"),$("#bankrollInvestedBookmakerContainer").removeClass("has-error"),$("#bonusBookmakerContainer").removeClass("has-error"),$("#bankrollAmountBookmakerContainer").removeClass("has-error"),$("#accountnameinput").val(""),$("#bankrollinvestedinput").val(""),$("#bonusinput").val(""),$("#bankrollamountinput").val(""),loadBookmakers(),$("#bookmakerAddModal").modal("hide"),toastr.success("Compte ajouté","Compte Bookmaker");else{var e="<ul>";t.errors.booknameselect?$("#bookmakerListOnBookmakerContainer").addClass("has-error"):$("#bookmakerListOnBookmakerContainer").removeClass("has-error"),t.errors.accountnameinput?$("#accountNameBookmakerContainer").addClass("has-error"):$("#accountNameBookmakerContainer").removeClass("has-error"),t.errors.bankrollamountinput?$("#bankrollAmountBookmakerContainer").addClass("has-error"):$("#bankrollAmountBookmakerContainer").removeClass("has-error"),$.each(t.errors,function(t,r){e+="<li>"+r+"</li>"}),e+="</ul>",toastr.error(e,"Compte bookmaker non ajouté")}},error:function(t){console.log("fail:"+t)}})}),paginationOnclick("pagination/ajax/bookmakers","#bookmakers-pagination"),$(function(){$("#depotAddButton").click(function(){$("#typetransinput").val("depot"),$("#amountTransactionContainer").removeClass("has-error"),$("#booknameTransContainer").removeClass("has-error"),$("#accountnameTransContainer").removeClass("has-error"),$("#describeTransContainer").removeClass("has-error")}),$("#retraitAddButton").click(function(){$("#typetransinput").val("retrait"),$("#amountTransactionContainer").removeClass("has-error"),$("#booknameTransContainer").removeClass("has-error"),$("#accountnameTransContainer").removeClass("has-error"),$("#describeTransContainer").removeClass("has-error")}),$("#bonusAddButton").click(function(){$("#typetransinput").val("bonus"),$("#amountTransactionContainer").removeClass("has-error"),$("#booknameTransContainer").removeClass("has-error"),$("#accountnameTransContainer").removeClass("has-error"),$("#describeTransContainer").removeClass("has-error")});$("#transactionAddModal");$("#transactionform-add").submit(function(t){t.preventDefault(),$.ajax({url:"transaction",type:"post",data:$(this).serialize(),dataType:"json",success:function(t){if(t.success)loadTransactions(),loadBookmakers(),toastr.success("transaction crée avec succès","Transaction");else{var e="<ul>";t.errors.amounttransinput?$("#amountTransactionContainer").addClass("has-error"):$("#amountTransactionContainer").removeClass("has-error"),t.errors.booknametransselect?$("#booknameTransContainer").addClass("has-error"):$("#booknameTransContainer").removeClass("has-error"),t.errors.accountnametransselect?$("#accountnameTransContainer").addClass("has-error"):$("#accountnameTransContainer").removeClass("has-error"),t.errors.describetranstext?$("#describeTransContainer").addClass("has-error"):$("#describeTransContainer").removeClass("has-error"),t.errors.retraitNonDispo,$.each(t.errors,function(t,r){e+="<li>"+r+"</li>"}),e+="</ul>",toastr.error(e,"Transaction non ajouté")}},error:function(){}})})}),paginationOnclick("pagination/ajax/tipsters","#tipsters-pagination");